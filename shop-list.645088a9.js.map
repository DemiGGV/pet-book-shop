{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-a34e92620445c9c8.js","src/shop-list.js","src/js/shoplist-gallery-categories.js","node_modules/@parcel/runtime-js/lib/runtime-fb5960c07fe41f89.js","node_modules/@parcel/runtime-js/lib/runtime-c10bbecf9fd9184c.js","node_modules/@parcel/runtime-js/lib/runtime-9fed184435a7ab29.js","node_modules/@parcel/runtime-js/lib/runtime-6470d009b32b682f.js","node_modules/@parcel/runtime-js/lib/runtime-79ac7523ea52fa17.js","node_modules/@parcel/runtime-js/lib/runtime-c120ca58a78c8f2f.js","node_modules/@parcel/runtime-js/lib/runtime-aec3850cfdaaf943.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cYJPg\\\":\\\"shop-list.645088a9.js\\\",\\\"5EBN1\\\":\\\"amazon-shop-1x.d33dc585.png\\\",\\\"gpYer\\\":\\\"amazon-shop-2x.01f59d3f.png\\\",\\\"57kdw\\\":\\\"apple-shop-1x.aeb5cfd2.png\\\",\\\"7J0mh\\\":\\\"apple-shop-2x.df06fe16.png\\\",\\\"9D8Wc\\\":\\\"bookshop-1x.d3877644.png\\\",\\\"eYjm2\\\":\\\"bookshop-2x.bc4a3396.png\\\",\\\"37BJJ\\\":\\\"symbol-defs.c191696b.svg\\\",\\\"fY5NC\\\":\\\"shop-list.fc10fffe.css\\\",\\\"8y6Oc\\\":\\\"shop-list.1e243e52.js\\\"}\"));","import './js/header-auth.js';\nimport './js/tumbler-theme.js';\n\nimport './js/auth-modal.js';\nimport './js/api-books.js';\nimport './js/support-ukraine.js';\nimport './js/shoplist-gallery-categories.js';\n\nimport './js/modal_footer.js';\nimport './js/footer.js';\nimport './js/pagination.js';\n","import {\n  setUserInLS,\n  getUserFromLS,\n  updateUserDatabase,\n} from './auth-modal.js';\n\nimport amazonImage1 from '../images/png/amazon-shop-1x.png';\nimport amazonImage2 from '../images/png/amazon-shop-2x.png';\nimport appleImage1 from '../images/png/apple-shop-1x.png';\nimport appleImage2 from '../images/png/apple-shop-2x.png';\nimport bookshopImage1 from '../images/png/bookshop-1x.png';\nimport bookshopImage2 from '../images/png/bookshop-2x.png';\n\nconst refs = {\n  navlinks: document.querySelectorAll('.active'),\n  shoppingListEl: document.querySelector('.shopping__cards'),\n  notificationContainerEl: document.querySelector('.shopping__storage'),\n  shoppingHeadingEl: document.querySelector('.shopping__heading'),\n  jsGuard: document.querySelector('.js-guard'),\n  logoTrashPath: new URL(\n    '../images/svg-sprite/symbol-defs.svg',\n    import.meta.url\n  ),\n};\n\nlet currUser = localStorage.getItem('user') ? getUserFromLS() : [];\nlet bookList = currUser.booksArr;\nlet userShoplist = [...currUser.bookDataArr];\n\nlet firstPage = 1;\nlet currentPage = 1;\nlet itemsPerPage = 5;\n\n\nrenderShoppingList(userShoplist, currentPage);\n\nfunction renderShoppingList(data, page) {\n  const startIndex = ( page - 1 ) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  let currentData = data.slice( startIndex, endIndex );\n  let lastPage = Math.ceil( userShoplist.length / itemsPerPage );\n  const pages = [...Array(lastPage)].map((_, i) => i)\n\n  if (currentData.length) {\n    removeEmptyNotificationContainer();\n    const markup = userShoplist\n      .map(\n        ({\n          _id,\n          book_image,\n          author,\n          book_image_width,\n          book_image_height,\n          title,\n          list_name,\n          description,\n          buy_links: [amazon, apple, , , bookshop],\n        }) => {\n          return `<li class=\"shopping__card\" data-id=\"${_id}\">\n  <div class=\"shopping__block\">\n    <div class=\"shopping__thumb\">\n      <img src=\"${book_image}\" alt=\"${list_name}\" class=\"shopping__book-img\" width=\"${book_image_width}\" height=\"${book_image_height}\"/>\n    </div>\n    <div class=\"shopping__wrap\">\n      <h2 class=\"shopping__title\">${title}</h2>\n      <p class=\"shopping__category\">${list_name}</p>\n      <p class=\"shopping__book-description\">${\n        description ? description : 'Empty description'\n      }</p>\n      <div class=\"shopping__wrap-shops\">\n        <p class=\"shopping__book-author\">${author}</p>\n        <ul class=\"shopping__shops\">\n          <li class=\"shopping__shop\">\n            <a href=\"${\n              amazon.url\n            }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon-book site\">\n              <img \n              srcset=\"${amazonImage1} 1x, ${amazonImage2} 2x\"\n              src=\"${amazonImage1}\"\n              alt=\"${amazon.name}\"\n              class=\"shopping__shop-img\"\n              width=\"48\"\n              height=\"15\"/>\n            </a>\n          </li>\n          <li class=\"shopping__shop\">\n            <a href=\"${\n              apple.url\n            }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-book site\">\n             <img \n             srcset=\"${appleImage1} 1x, ${appleImage2} 2x\"\n             src=\"${appleImage1}\"\n             alt=\"${apple.name}\"\n             class=\"shopping__shop-img\"\n             width=\"28\"\n             height=\"27\"/>\n            </a>\n          </li>\n          <li class=\"shopping__shop\">\n            <a href=\"${\n              bookshop.url\n            }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Book-shop site\">\n             <img\n             srcset=\"${bookshopImage1} 1x, ${bookshopImage2} 2x\"\n             src=\"${bookshopImage1}\"\n             alt=\"${bookshop.name}\"\n             class=\"shopping__shop-img\"\n             width=\"32\"\n             height=\"30\"/>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <button type=\"button\" class=\"shopping__btn\" aria-label=\"Delete the book from shopping list\" data-id=\"${_id}\">\n    <svg class=\"shopping__btn-icon\" width=\"18\" height=\"18\">\n      <use href=\"${refs.logoTrashPath}#icon-trash\"></use>\n    </svg>\n  </button>\n  </li>`;\n        }\n      )\n      .join(''); //.concat(', ', str1)\n    refs.shoppingListEl.innerHTML = markup;\n    refs.shoppingListEl.addEventListener('click', onTrashClick);\n  } else {\n    pasteEmptyNotificationContainer();\n  }\n}\n\nfunction pasteEmptyNotificationContainer() {\n  refs.shoppingListEl.innerHTML = '';\n  refs.notificationContainerEl.classList.add('empty-js');\n  refs.shoppingListEl.classList.add('empty-js');\n}\n\nfunction removeEmptyNotificationContainer() {\n  refs.notificationContainerEl.classList.remove('empty-js');\n  refs.shoppingHeadingEl.style.marginBottom = '';\n  removeEventListener('click', onTrashClick);\n}\n\nfunction onTrashClick(e) {\n  const isButton = e.target\n    .closest('.shopping__btn')\n    .classList.contains('shopping__btn');\n  if (!isButton) {\n    return;\n  }\n\n  const idToDelete = e.target.closest('.shopping__btn').dataset.id.trim();\n  const removedElIndexFromStorage = bookList.findIndex(\n    item => item === idToDelete\n  );\n\n  bookList.splice(removedElIndexFromStorage, 1);\n  userShoplist.splice(removedElIndexFromStorage, 1);\n  currUser.booksArr = bookList;\n  currUser.bookDataArr = userShoplist;\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n  renderShoppingList(userShoplist, currentPage);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5EBN1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gpYer\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"57kdw\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7J0mh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9D8Wc\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"eYjm2\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"37BJJ\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$gZ6M0","$f3e8de01acb66a67$exports","URL","resolve","import","meta","url","toString","$32b8866e0fbe8ec0$exports","$f80102d5fdfd543f$exports","$63cde6a0676257d0$exports","$41b1310166333f79$exports","$4259537de0e2deb2$exports","$28a95df86868d79d$exports","$325c62a306cfe754$var$refs","navlinks","document","querySelectorAll","shoppingListEl","querySelector","notificationContainerEl","shoppingHeadingEl","jsGuard","logoTrashPath","$325c62a306cfe754$var$currUser","localStorage","getItem","getUserFromLS","$325c62a306cfe754$var$bookList","booksArr","$325c62a306cfe754$var$userShoplist","bookDataArr","$325c62a306cfe754$var$renderShoppingList","data","page","startIndex","endIndex","currentData","slice","lastPage","Math","ceil","Array","map","_","classList","remove","style","marginBottom","removeEventListener","$325c62a306cfe754$var$onTrashClick","markup","_id","book_image","author","book_image_width","book_image_height","title","list_name","description","buy_links","amazon","apple","bookshop","$parcel$interopDefault","name","join","innerHTML","addEventListener","add","e","target","closest","contains","idToDelete","dataset","trim","removedElIndexFromStorage","findIndex","item","splice","setUserInLS","updateUserDatabase"],"version":3,"file":"shop-list.645088a9.js.map"}