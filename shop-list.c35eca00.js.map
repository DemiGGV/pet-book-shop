{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-b9650cd0db207810.js","src/shop-list.js","src/js/shoplist-gallery-categories.js","node_modules/@parcel/runtime-js/lib/runtime-a1620986bad2896c.js","node_modules/@parcel/runtime-js/lib/runtime-0a155da04a0249ed.js","node_modules/@parcel/runtime-js/lib/runtime-0a631762df26bb6e.js","node_modules/@parcel/runtime-js/lib/runtime-4cc0661bd0915302.js","node_modules/@parcel/runtime-js/lib/runtime-3a5a54c263a2eaa8.js","node_modules/@parcel/runtime-js/lib/runtime-4fdfb64879132877.js","node_modules/@parcel/runtime-js/lib/runtime-5345a8497b60ffe4.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ljo6a\\\":\\\"shop-list.c35eca00.js\\\",\\\"85Y7O\\\":\\\"amazon-shop-1x.d33dc585.png\\\",\\\"jw74O\\\":\\\"amazon-shop-2x.01f59d3f.png\\\",\\\"j0S7s\\\":\\\"apple-shop-1x.aeb5cfd2.png\\\",\\\"4zNsm\\\":\\\"apple-shop-2x.df06fe16.png\\\",\\\"7wvI0\\\":\\\"bookshop-1x.d3877644.png\\\",\\\"1GuMW\\\":\\\"bookshop-2x.bc4a3396.png\\\",\\\"f8sQi\\\":\\\"symbol-defs.c191696b.svg\\\",\\\"fY5NC\\\":\\\"shop-list.fc10fffe.css\\\",\\\"f6nBd\\\":\\\"shop-list.3f5b054e.js\\\"}\"));","import './js/header-auth.js';\nimport './js/tumbler-theme.js';\n\nimport './js/auth-modal.js';\nimport './js/api-books.js';\nimport './js/support-ukraine.js';\nimport './js/shoplist-gallery-categories.js';\n\nimport './js/modal_footer.js';\nimport './js/footer.js';\nimport './js/pagination.js';\n","import {\n  setUserInLS,\n  getUserFromLS,\n  updateUserDatabase,\n} from './auth-modal.js';\n\nimport amazonImage1 from '../images/png/amazon-shop-1x.png';\nimport amazonImage2 from '../images/png/amazon-shop-2x.png';\nimport appleImage1 from '../images/png/apple-shop-1x.png';\nimport appleImage2 from '../images/png/apple-shop-2x.png';\nimport bookshopImage1 from '../images/png/bookshop-1x.png';\nimport bookshopImage2 from '../images/png/bookshop-2x.png';\n\nconst refs = {\n  navlinks: document.querySelectorAll('.active'),\n  shoppingListEl: document.querySelector('.shopping__cards'),\n  notificationContainerEl: document.querySelector('.shopping__storage'),\n  shoppingHeadingEl: document.querySelector('.shopping__heading'),\n  jsGuard: document.querySelector('.js-guard'),\n  logoTrashPath: new URL(\n    '../images/svg-sprite/symbol-defs.svg',\n    import.meta.url\n  ),\n};\n\nlet currUser = localStorage.getItem('user') ? getUserFromLS() : [];\nlet bookList = currUser.booksArr;\nlet userShoplist = [...currUser.bookDataArr];\n\nlet currentPage = 1;\nlet itemsPerPage = 5;\nlet firstPage = 1;\nlet lastPage = math.Ceil( userShoplist.length / itemsPerPage );\n\n\nfunction pasteEmptyNotificationContainer() {\n  refs.shoppingListEl.innerHTML = '';\n  refs.notificationContainerEl.classList.add('empty-js');\n  refs.shoppingListEl.classList.add('empty-js');\n}\n\nfunction removeEmptyNotificationContainer() {\n  refs.notificationContainerEl.classList.remove('empty-js');\n  refs.shoppingHeadingEl.style.marginBottom = '';\n  removeEventListener('click', onTrashClick);\n}\n\nfunction onTrashClick(e) {\n  const isButton = e.target\n    .closest('.shopping__btn')\n    .classList.contains('shopping__btn');\n  if (!isButton) {\n    return;\n  }\n\n  const idToDelete = e.target.closest('.shopping__btn').dataset.id.trim();\n  const removedElIndexFromStorage = bookList.findIndex(\n    item => item === idToDelete\n  );\n\n  bookList.splice(removedElIndexFromStorage, 1);\n  userShoplist.splice(removedElIndexFromStorage, 1);\n  currUser.booksArr = bookList;\n  currUser.bookDataArr = userShoplist;\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n  renderShoppingList(userShoplist, currentPage);\n}\n\nrenderShoppingList(userShoplist, currentPage);\n\nfunction renderShoppingList(data, page) {\n  const startIndex = ( page - 1 ) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  let currentData = data.slice( startIndex, endIndex );\n  let lastPage = Math.ceil( userShoplist.length / itemsPerPage );\n  const pages = [...Array(lastPage)].map((_, i) => i)\n\n  if (currentData.length) {\n    removeEmptyNotificationContainer();\n    const markup = userShoplist\n      .map(\n        ({\n          _id,\n          book_image,\n          author,\n          book_image_width,\n          book_image_height,\n          title,\n          list_name,\n          description,\n          buy_links: [amazon, apple, , , bookshop],\n        }) => {\n          return `<li class=\"shopping__card\" data-id=\"${_id}\">\n    <div class=\"shopping__block\">\n      <div class=\"shopping__thumb\">\n        <img src=\"${book_image}\" alt=\"${list_name}\" class=\"shopping__book-img\" width=\"${book_image_width}\" height=\"${book_image_height}\"/>\n      </div>\n      <div class=\"shopping__wrap\">\n          <h2 class=\"shopping__title\">${title}</h2>\n          <p class=\"shopping__category\">${list_name}</p>\n          <p class=\"shopping__book-description\">${\n          description ? description : 'Empty description'\n          }</p>\n        <div class=\"shopping__wrap-shops\">\n          <p class=\"shopping__book-author\">${author}</p>\n          <ul class=\"shopping__shops\">\n            <li class=\"shopping__shop\">\n              <a href=\"${\n                amazon.url\n                }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon-book site\">\n                <img \n                srcset=\"${amazonImage1} 1x, ${amazonImage2} 2x\"\n                src=\"${amazonImage1}\"\n                alt=\"${amazon.name}\"\n                class=\"shopping__shop-img\"\n                width=\"48\"\n                height=\"15\"/>\n              </a>\n            </li>\n            <li class=\"shopping__shop\">\n              <a href=\"${\n                 apple.url\n               }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-book site\">\n               <img \n               srcset=\"${appleImage1} 1x, ${appleImage2} 2x\"\n               src=\"${appleImage1}\"\n               alt=\"${apple.name}\"\n               class=\"shopping__shop-img\"\n               width=\"28\"\n               height=\"27\"/>\n              </a>\n            </li>\n            <li class=\"shopping__shop\">\n              <a href=\"${\n                 bookshop.url\n               }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Book-shop site\">\n               <img\n                srcset=\"${bookshopImage1} 1x, ${bookshopImage2} 2x\"\n                src=\"${bookshopImage1}\"\n                alt=\"${bookshop.name}\"\n                class=\"shopping__shop-img\"\n                width=\"32\"\n                height=\"30\"/>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <button type=\"button\" class=\"shopping__btn\" aria-label=\"Delete the book from shopping list\" data-id=\"${_id}\">\n      <svg class=\"shopping__btn-icon\" width=\"18\" height=\"18\">\n       <use href=\"${refs.logoTrashPath}#icon-trash\"></use>\n      </svg>\n    </button>\n  </li>`;\n        }\n      )\n      .join('').concat(``);\n    refs.shoppingListEl.innerHTML = markup;\n    refs.shoppingListEl.addEventListener('click', onTrashClick);\n  } else {\n    pasteEmptyNotificationContainer();\n  }\n}","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"85Y7O\");","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"jw74O\");","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"j0S7s\");","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"4zNsm\");","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"7wvI0\");","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"1GuMW\");","module.exports = require('./helpers/bundle-url').getBundleURL('ljo6a') + require('./helpers/bundle-manifest').resolve(\"f8sQi\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$1t1Wn","$a37d851eb2e03dc8$exports","getBundleURL","resolve","$4c27f65496ffb023$exports","$05f4b90264cb060e$exports","$04435ecb002b737f$exports","$ee77830122abc8b9$exports","$bc3d869bc18ce94d$exports","$36b7ae2db4020163$exports","$404db9dec6a14388$var$refs","navlinks","document","querySelectorAll","shoppingListEl","querySelector","notificationContainerEl","shoppingHeadingEl","jsGuard","logoTrashPath","URL","$404db9dec6a14388$var$currUser","localStorage","getItem","$cfOGF","getUserFromLS","$404db9dec6a14388$var$bookList","booksArr","$404db9dec6a14388$var$userShoplist","$parcel$interopDefault","$8nrFW","bookDataArr","math","Ceil","$404db9dec6a14388$var$onTrashClick","e","target","closest","classList","contains","idToDelete","dataset","trim","removedElIndexFromStorage","findIndex","item","splice","setUserInLS","updateUserDatabase","$404db9dec6a14388$var$renderShoppingList","data","page","startIndex","endIndex","currentData","slice","lastPage1","Math","ceil","Array","map","_","remove","style","marginBottom","removeEventListener","markup","param","_id","book_image","author","book_image_width","book_image_height","title","list_name","description","_buy_links","buy_links","amazon","apple","bookshop","concat","name","join","innerHTML","addEventListener","add"],"version":3,"file":"shop-list.c35eca00.js.map"}