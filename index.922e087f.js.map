{"mappings":"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","sources":["src/index.js","src/js/modal-item-home.js","src/js/categories.js","src/js/gallery-categories.js"],"sourcesContent":["// import axios from 'axios';\n// import Notiflix from 'notiflix';\n\nlet user = {\n  name: '',\n  email: '',\n  password: '',\n  photoUrl: './images/png/user.png',\n  isSignedIn: false,\n  booksArr: [],\n  bookDataArr: [],\n};\n\nimport './js/header-auth.js';\nimport './js/tumbler-theme.js';\n\nimport './js/auth-modal.js';\nimport './js/api-books.js';\nimport './js/support-ukraine.js';\nimport './js/modal-item-home.js';\nimport './js/categories.js';\nimport './js/gallery-categories.js';\n\nimport './js/modal_footer.js';\nimport './js/footer.js';\nimport './js/pagination.js';\n","import {\n  setUserInLS,\n  getUserFromLS,\n  isUserSet,\n  updateUserDatabase,\n} from './auth-modal.js';\nimport { getBooksId } from './api-books.js';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst modal = document.querySelector('.backdrop');\n\nlet currUser = localStorage.getItem('user') ? getUserFromLS() : [];\n\nlet idBook;\nlet bookData;\nlet btnContainer;\nlet flag = true;\n\nfunction modalOpen(id) {\n  currUser = localStorage.getItem('user') ? getUserFromLS() : [];\n  getBooksId(id).then(data => {\n    if (!data) {\n      Notify.failure('Sorry, an error has occurred');\n      return;\n    }\n    idBook = id;\n    bookData = data;\n    const modalBody = document.querySelector('.js-modal-body');\n    modalBody.innerHTML = '';\n    modalBody.insertAdjacentHTML('beforeend', createModalMarcup(data));\n    const btnMarcup = '<div class = \"js-btn-container\"></div>';\n    if (flag) {\n      modalBody.insertAdjacentHTML('afterend', btnMarcup);\n    }\n    btnContainer = document.querySelector('.js-btn-container');\n    btnContainer.innerHTML = createButtonMarcup(id);\n    openModalWindow();\n\n    const buttonAdd = document.querySelector('.modal__button');\n    if (buttonAdd) {\n      buttonAdd.addEventListener('click', onButtonAddClick);\n    }\n\n    const buttonRemove = document.querySelector('.modal__button-remove');\n    if (buttonRemove) {\n      buttonRemove.addEventListener('click', onButtonRemoveClick);\n    }\n\n    const btnClose = document.querySelector('.js-close');\n    btnClose.addEventListener('click', closeModalWindow);\n  });\n}\n\nfunction createModalMarcup({\n  author,\n  book_image,\n  title,\n  description,\n  buy_links,\n}) {\n  if (!book_image) {\n    book_image = '../images/book_plug.jpg';\n  }\n\n  if (!description) {\n    description = 'There is no description';\n  }\n\n  let amazonLink;\n  let appleBooksLink;\n  let bookshopLink;\n\n  buy_links.forEach(element => {\n    if (element.name === 'Amazon') {\n      amazonLink = element.url;\n    }\n\n    if (element.name === 'Apple Books') {\n      appleBooksLink = element.url;\n    }\n\n    if (element.name === 'Bookshop') {\n      bookshopLink = element.url;\n    }\n  });\n  return `<div class=\"modal__body\">\n      <img src=\"${book_image}\" alt=\"${title}\" class=\"modal__img\">\n      <div class=\"modal__box\">\n      <h2 class=\"modal__title\">${title}</h2>\n      <h3 class=\"modal__subtitle\">${author}</h3>\n      <p class=\"modal__text\">${description}</p>\n      <ul class=\"modal__social-list\">\n          <li class=\"modal__social-amazon\">\n            <a class=\"modal__link-social-amazon\" href=\"${amazonLink}\" target=\"_blank\"></a>\n          </li>\n          <li class=\"modal__social-open-book\">\n          <a\n          class=\"modal__link-social-open-book\"\n          href=\"${appleBooksLink}\"\n          target=\"_blank\"\n          ></a>\n          </li>\n          <li class=\"modal__social-book-shop\">\n          <a\n          class=\"modal__link-social-book-shop\"\n          href=\"${bookshopLink}\"\n          target=\"_blank\"\n          ></a>\n          </li>\n          </ul>\n          </div>\n          </div>`;\n}\n\nfunction createButtonMarcup(id) {\n  if (!isUserSet()) {\n    return `<p class=\"modal__congratulation\">\n            Sign in to add the book to your shopping list.\n            </p>`;\n  }\n\n  if (currUser.booksArr.indexOf(id) === -1) {\n    return `<button class=\"modal__button\">add to shopping list</button>`;\n  }\n\n  return `<button class=\"modal__button-remove\">\n          remove from the shopping list\n          </button>`;\n}\n\nfunction openModalWindow() {\n  modal.classList.add('is-block');\n  document.body.classList.add('disable-scroll');\n\n  document.addEventListener('keydown', onEscKeyPress);\n\n  const backdrop = document.querySelector('.backdrop');\n  backdrop.addEventListener('click', onBackdropClick);\n\n  function onBackdropClick(evt) {\n    if (evt.target.classList.contains('backdrop')) {\n      closeModalWindow();\n      backdrop.removeEventListener('click', onBackdropClick);\n    }\n    return;\n  }\n}\n\nfunction onEscKeyPress(evt) {\n  if (evt.code !== 'Escape') {\n    return;\n  }\n\n  closeModalWindow();\n  document.removeEventListener('keydown', onEscKeyPress);\n}\n\nfunction closeModalWindow() {\n  flag = false;\n  modal.classList.remove('is-block');\n  document.body.classList.remove('disable-scroll');\n}\n\nfunction onButtonAddClick() {\n  currUser.booksArr.push(idBook);\n  currUser.bookDataArr.push(bookData);\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n\n  btnContainer.innerHTML = createremoveMarcup();\n  const buttonRemove = document.querySelector('.modal__button-remove');\n  buttonRemove.addEventListener('click', onButtonRemoveClick);\n}\n\nfunction onButtonRemoveClick() {\n  currUser.booksArr.splice(currUser.booksArr.indexOf(idBook), 1);\n  currUser.bookDataArr.splice(currUser.bookDataArr.indexOf(bookData), 1);\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n\n  btnContainer.innerHTML = createAddMarcup();\n  const btnAdd = document.querySelector('.modal__button');\n  btnAdd.addEventListener('click', onButtonAddClick);\n}\n\nfunction createremoveMarcup() {\n  return `<div class=\"button__wrapper-remove\">\n  <button class=\"modal__button-remove\">\n  remove from the shopping list\n  </button>\n  </div>\n  <p class=\"modal__congratulation\">\n  Сongratulations! You have added the book to the shopping list. To\n  delete, press the button “Remove from the shopping list”.\n  </p>`;\n}\n\nfunction createAddMarcup() {\n  return `<div class=\"button__wrapper-remove\">\n  <button class=\"modal__button\">add to shopping list</button>\n  </div>\n  <p class=\"modal__congratulation\">\n  Сongratulations! You have removed the book from the shopping list. To\n  add, press the button “Add to shopping list”.\n  </p>`;\n}\n\nexport { modalOpen };\n","import { getCategoryList, getBooksCategory } from './api-books';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { modalOpen } from './modal-item-home';\n\nconst filterListEl = document.querySelector('.filter__list');\nlet varWithActiveValueFilter = document.querySelector('.filter__item--active');\nconst booksList = document.querySelector('.js-gallery-best-books');\nconst galleryTitle = document.querySelector('.gallery-title');\nconst allCategories = document.querySelector('.filter__item');\n\nlet varWithCurrentCategoryValue = 'ALL CATEGORIES';\nconst bookApi = getCategoryList();\n\ngetCategoryList().then(categorie => {\n  if (!categorie.length) {\n    Notify.failure('Oops something going wrong.');\n    return;\n  }\n  filterListEl.insertAdjacentHTML('beforeend', createMarkup(categorie));\n});\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      value =>\n        `<li class=\"filter__item\" data-mark-active=\"${value.list_name}\">${value.list_name}</li>`\n    )\n    .join('');\n}\n\nallCategories.addEventListener('click', event => {\n  if (event.target.textContent === 'All categories') {\n    location.reload();\n    return;\n  }\n});\n\nfilterListEl.addEventListener('click', event => {\n  if (\n    event.target.outerText.toLowerCase() ===\n    varWithCurrentCategoryValue.toLowerCase()\n  ) {\n    return;\n  }\n\n  varWithCurrentCategoryValue = event.target.outerText;\n\n  addGalleryMarkupAndChangeFilter();\n\n  if (event.target.textContent === 'All categories') {\n    location.reload();\n    return;\n  }\n\n  addCardsByCategory();\n});\n\nfunction addGalleryMarkupAndChangeFilter() {\n  const targetEl = document.querySelector(\n    `[data-mark-active=\"${varWithCurrentCategoryValue}\"]`\n  );\n\n  const activeElement = document.querySelector('.filter__item--active');\n  if (activeElement) {\n    activeElement.classList.remove('filter__item--active');\n  }\n\n  varWithActiveValueFilter.classList.remove('filter__item--active');\n\n  targetEl.classList.add('filter__item--active');\n\n  varWithActiveValueFilter = targetEl;\n}\n// console.log(varWithActiveValueFilter);\n\n//// Рендер карток книжок по категоріям\nfunction addCardsByCategory() {\n  const categoryValue = varWithActiveValueFilter.innerHTML;\n  console.log(categoryValue);\n  getBooksCategory(categoryValue).then(booksArr => {\n    if (!booksArr.length) {\n      Notify.failure(\n        `Sorry, there are no ${categoryValue} books. Please choose another category.`\n      );\n      return;\n    }\n\n    galleryTitle.innerHTML = categoryValue;\n    booksList.innerHTML = createMoreBooks(booksArr);\n\n    addColorToTitle();\n    addModal();\n\n    //  bookGalleryCard.forEach((book) => {\n    //    book.addEventListener('click', (e) => {\n    //      const bookId = e.currentTarget.id;\n    //      modalOpen(bookId);\n    //    })\n    //  })\n  });\n}\n\n//// Створення карток книжок по категоріям\nfunction createMoreBooks(booksArr) {\n  const bookCard = booksArr\n    .map(({ _id, book_image, title, author }) => {\n      //  Перевірка чи пришла обложка книги з бекенду і заміна її на заглушку в разі необхідності //\n      if (!book_image) {\n        book_image = '../images/book_plug.jpg';\n      }\n\n      const markup = `<li id=\"${_id}\" class=\"books-gallery__card\">\n     <div class=\"card-container\">\n     <img class=\"books-gallery__card-img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n     <div class=\"port-overlay\"><p>quick view</p></div>\n     </div>\n     <h2 class=\"books-gallery__card-title\">${title}</h2>\n     <p class=\"books-gallery__card-author\">${author}</p>\n     </li>`;\n\n      return markup;\n    })\n    .join('');\n\n  return bookCard;\n}\n\n//// Додавання акцентного кольолру до заголовку з назвою категорії списку книг\nfunction addColorToTitle() {\n  // const textgalleryTitle = galleryTitle.innerHTML;\n  const categoryValue = varWithActiveValueFilter.innerHTML;\n\n  let wordsArray = categoryValue.split(' ');\n  let lastWord = wordsArray.pop();\n  let firstPart = wordsArray.join(' ');\n\n  galleryTitle.innerHTML = `${firstPart} <span class=\"books-gallery__title-accent\">${lastWord}</span>`;\n}\n\nfunction onBtnOpen(evt) {\n  const bookId = evt.currentTarget.id;\n  modalOpen(bookId);\n}\n\n//// Відкриття модального вікна при кліку по картці\nfunction addModal() {\n  const booksGalleryCards = document.querySelectorAll('.books-gallery__card');\n\n  booksGalleryCards.forEach(card => {\n    card.addEventListener('click', onBtnOpen);\n  });\n}\n\nexport { addGalleryMarkupAndChangeFilter };\n","import { getTopBooks, getBooksCategory } from './api-books';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { modalOpen } from './modal-item-home';\n\nconst booksList = document.querySelector('.js-gallery-best-books');\nconst galleryTitle = document.querySelector('.gallery-title');\n\ngetTopBooks().then(data => {\n  if (!data.length) {\n    Notify.failure(\n      'Sorry, there are no best sellers books. Please choose a category.'\n    );\n    return;\n  }\n  galleryTitle.insertAdjacentHTML('beforeend', createTitleMarcup());\n  booksList.insertAdjacentHTML('beforeend', createBooklistMarcup(data));\n\n  const galeryList = document.querySelectorAll('.book-cards');\n  galeryList.forEach(element => {\n    element.addEventListener('click', onBtnOpen);\n  });\n});\n\nfunction createTitleMarcup() {\n  return 'Best Sellers <span class=\"gallery-title-span\">Books</span>';\n}\n\nfunction createBooklistMarcup(data) {\n  const marcup = [];\n\n  // Відображення необхідної кількості категорій  //\n\n  data.forEach((element, i) => {\n    const booksArr = data[i].books;\n    const bookCards = [];\n\n    booksArr.forEach(({ _id, book_image, title, author }) => {\n      //  Перевірка чи пришла обложка книги з бекенду і заміна її на заглушку в разі необхідності //\n      if (!book_image) {\n        book_image = '../images/book_plug.jpg';\n      }\n\n      const bookCardsMarcup = `<li id=\"${_id}\" class = \"book-cards\">\n              <div class = \"card-container\">\n                <img src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                  <div class=\"port-overlay\">\n                    <p>quick view</p>\n                  </div>\n              </div>\n                <h2>${title}</h2>\n                <p>${author}</p>\n                </li>`;\n\n      bookCards.push(bookCardsMarcup);\n    });\n\n    const btnSeeMore = `<button type=\"button\" id=\"${data[i].list_name}\" class=\"book-class-more\">\n        see more\n      </button>`;\n\n    marcup.push(`<li class = \"category-block\">\n            <p class = \"gallery-category-title\">${data[i].list_name}</p>\n            <ul class = \"category-block-list\">${bookCards.join('')}</ul>\n            ${btnSeeMore}\n            </li>`);\n  });\n\n  return marcup.join('');\n}\n\nfunction onBtnOpen(evt) {\n  const bookId = evt.currentTarget.id;\n  modalOpen(bookId);\n}\n\n/////=================== ВІДОБРАЖЕННЯ КНИГ ПО КАТЕГОРІЯМ =============================////\n\nconst eventLister = document.querySelector('.books-gallery');\nlet categoryValue = 'ALL CATEGORIES';\n\n//// Рендер списку книг по категорії при кліку на \"see more\" кнопці\neventLister.addEventListener('click', onMoreBtnClick);\nfunction onMoreBtnClick(e) {\n  if (e.target.localName === 'button') {\n    categoryValue = e.target.getAttribute('id');\n\n    addCardsByCategory();\n    // addColorToCategory();\n    changeColorTitle(categoryValue);\n  }\n}\n\n//// Рендер карток книжок по категоріям\nfunction addCardsByCategory() {\n  getBooksCategory(categoryValue).then(booksArr => {\n    if (!booksArr.length) {\n      Notify.failure(\n        `Sorry, there are no ${categoryValue} books. Please choose another category.`\n      );\n      return;\n    }\n\n    galleryTitle.innerHTML = categoryValue;\n    booksList.innerHTML = createMoreBooks(booksArr);\n\n    addColorToTitle();\n    addModal();\n  });\n}\n\n//// Створення карток книжок по категоріям\nfunction createMoreBooks(booksArr) {\n  const bookCard = booksArr\n    .map(({ _id, book_image, title, author }) => {\n      //  Перевірка чи пришла обложка книги з бекенду і заміна її на заглушку в разі необхідності //\n      if (!book_image) {\n        book_image = '../images/book_plug.jpg';\n      }\n\n      const markup = `<li id=\"${_id}\" class=\"books-gallery__card\">\n        <div class=\"card-container\">\n        <img class=\"books-gallery__card-img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n        <div class=\"port-overlay\"><p>quick view</p></div>\n        </div>\n        <h2 class=\"books-gallery__card-title\">${title}</h2>\n        <p class=\"books-gallery__card-author\">${author}</p>\n        </li>`;\n\n      return markup;\n    })\n    .join('');\n\n  return bookCard;\n}\n\n//// Додавання акцентного кольолру до заголовку з назвою категорії списку книг\nfunction addColorToTitle() {\n  const textgalleryTitle = galleryTitle.innerHTML;\n\n  let wordsArray = categoryValue.split(' ');\n  let lastWord = wordsArray.pop();\n  let firstPart = wordsArray.join(' ');\n\n  galleryTitle.innerHTML = `${firstPart} <span class=\"books-gallery__title-accent\">${lastWord}</span>`;\n}\n\nfunction changeColorTitle(title) {\n  const labelCategories = document.querySelectorAll('.filter__item');\n  const activeElement = document.querySelector('.filter__item--active');\n\n  \n  activeElement.classList.remove('filter__item--active');\n  const selectedElement = [...labelCategories].find(({ textContent }) => {\n    return textContent === title;\n  });\n  console.log(selectedElement);\n  selectedElement.classList.add('filter__item--active');\n  \n}\n\n//// Відкриття модального вікна при кліку по картці\nfunction addModal() {\n  const booksGalleryCards = document.querySelectorAll('.books-gallery__card');\n\n  booksGalleryCards.forEach(card => {\n    card.addEventListener('click', onBtnOpen);\n  });\n}\n\n\n"],"names":["parcelRequire","$gZ6M0","$93f4ec6a66bb58a9$var$modal","document","querySelector","$93f4ec6a66bb58a9$var$idBook","$93f4ec6a66bb58a9$var$bookData","$93f4ec6a66bb58a9$var$btnContainer","$93f4ec6a66bb58a9$var$currUser","localStorage","getItem","getUserFromLS","$93f4ec6a66bb58a9$var$flag","$93f4ec6a66bb58a9$export$bcfd85ab6a968274","id","$fA1we","getBooksId","then","data","$iQIUW","Notify","failure","modalBody","innerHTML","insertAdjacentHTML","author","book_image","title","description","buy_links","amazonLink","appleBooksLink","bookshopLink","forEach","element","name","url","$93f4ec6a66bb58a9$var$createModalMarcup","isUserSet","booksArr","indexOf","$93f4ec6a66bb58a9$var$createButtonMarcup","classList","add","body","addEventListener","$93f4ec6a66bb58a9$var$onEscKeyPress","backdrop","onBackdropClick","evt","target","contains","$93f4ec6a66bb58a9$var$closeModalWindow","removeEventListener","$93f4ec6a66bb58a9$var$openModalWindow","buttonAdd","$93f4ec6a66bb58a9$var$onButtonAddClick","buttonRemove","$93f4ec6a66bb58a9$var$onButtonRemoveClick","code","remove","push","bookDataArr","setUserInLS","updateUserDatabase","splice","$f3b06000f9b46fbb$var$filterListEl","$f3b06000f9b46fbb$var$varWithActiveValueFilter","$f3b06000f9b46fbb$var$booksList","$f3b06000f9b46fbb$var$galleryTitle","$f3b06000f9b46fbb$var$allCategories","$f3b06000f9b46fbb$var$varWithCurrentCategoryValue","getCategoryList","$f3b06000f9b46fbb$var$onBtnOpen","currentTarget","categorie","length","map","value","list_name","join","event","textContent","location","reload","outerText","toLowerCase","targetEl","activeElement","$f3b06000f9b46fbb$export$49a973d52d368b29","categoryValue","console","log","getBooksCategory","_id","$f3b06000f9b46fbb$var$createMoreBooks","wordsArray","split","lastWord","pop","firstPart","$f3b06000f9b46fbb$var$addColorToTitle","querySelectorAll","card","$f3b06000f9b46fbb$var$addCardsByCategory","$e43e14146b941474$var$booksList","$e43e14146b941474$var$galleryTitle","$e43e14146b941474$var$onBtnOpen","getTopBooks","marcup","i","books","bookCards","bookCardsMarcup","btnSeeMore","$e43e14146b941474$var$createBooklistMarcup","$e43e14146b941474$var$eventLister","$e43e14146b941474$var$categoryValue","e","localName","getAttribute","$e43e14146b941474$var$createMoreBooks","$e43e14146b941474$var$addColorToTitle","labelCategories","selectedElement","find","$e43e14146b941474$var$changeColorTitle"],"version":3,"file":"index.922e087f.js.map"}